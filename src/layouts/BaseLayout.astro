---
import "../styles/global.css";
const { title = "Official NTD User Guide", description = "" } = Astro.props;

const pathname = Astro.url.pathname;
function isActive(href){
  return pathname === href || (href !== "/" && pathname.startsWith(href));
}
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <title>{title}</title>
    {description && <meta name="description" content={description} />}

    <!-- FAVICON -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon.png" />
    <meta name="theme-color" content="#0b0f18" />
  </head>

  <body>
    <header class="topbar">
      <div class="topbar-inner">
        <div class="brandline">
          <div class="dot"></div>
          <div>
            <div style="font-weight:900; line-height:1.1;">Official NTD User Guide</div>
            <small>Numbers, tiers, and mechanics in one place</small>
          </div>
        </div>

        <nav class="topnav" aria-label="Primary">
          <a class={isActive("/") ? "active" : ""} href="/">Home</a>
          <a class={isActive("/tier-lists") ? "active" : ""} href="/tier-lists">Tier Lists</a>
          <a class={isActive("/unit-arcade") ? "active" : ""} href="/unit-arcade">Unit Arcade</a>
          <a class={isActive("/guides") ? "active" : ""} href="/guides">Info &amp; Guides</a>
          <a class={isActive("/faq") ? "active" : ""} href="/faq">FAQ</a>
        </nav>

        <div class="topsearch">
          <input id="globalSearch" placeholder="Search unitsâ€¦" autocomplete="off" />
        </div>
      </div>
    </header>

    <main class="shell">
      <slot />
    </main>

    <script>
      // Global search sends you to Unit Arcade.
      const input = document.getElementById("globalSearch");
      if (input) {
        input.addEventListener("keydown", (e) => {
          if (e.key !== "Enter") return;
          const q = input.value.trim();
          if (!q) return;
          window.location.href = `/unit-arcade?q=${encodeURIComponent(q)}`;
        });
      }
    </script>
  </body>
</html>
