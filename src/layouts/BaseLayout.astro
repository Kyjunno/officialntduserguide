---
import "../styles/global.css";
const { title = "Unit Guide", description = "" } = Astro.props;

const pathname = Astro.url.pathname;
function isActive(href){
  return pathname === href || (href !== "/" && pathname.startsWith(href));
}
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{title}</title>
    {description && <meta name="description" content={description} />}
  </head>
  <body>
    <div class="container">
      <aside class="sidebar">
        <div class="brand">
          <div class="dot"></div>
          <div>
            <div style="font-weight:700; line-height:1.2;">Unit Guide</div>
            <small>Community reference, always updating</small>
          </div>
        </div>

        <div class="searchbox">
          <input id="search" placeholder="Search (coming soon)â€¦" autocomplete="off" disabled />
          <div id="results" style="margin-top:10px; display:none;"></div>
          <small style="display:block; margin-top:8px;">
            Search will be enabled after the site is fully deployed.
          </small>
        </div>

        <div class="section-title">Navigation</div>
        <nav class="nav">
          <a class={isActive("/") ? "active" : ""} href="/">Home</a>
          <a class={isActive("/units") ? "active" : ""} href="/units">Units</a>
          <a class={isActive("/charts") ? "active" : ""} href="/charts">Charts</a>
          <a class={isActive("/mechanics") ? "active" : ""} href="/mechanics">Mechanics</a>
          <a class={isActive("/patch-notes") ? "active" : ""} href="/patch-notes">Patch notes</a>
        </nav>

        <div class="section-title">Community</div>
        <nav class="nav">
          <a href="/contribute">Submit a correction</a>
        </nav>

        <small style="display:block; padding:10px; color:var(--muted);">
          Tip: keep one source of truth (like <code>src/data/units.json</code>), then update it when your game updates.
        </small>
      </aside>

      <main class="main">
        <slot />
      </main>
    </div>
  </body>
</html>
