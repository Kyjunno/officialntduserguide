---
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout title="Info &amp; Guides | Official NTD User Guide">
  <div class="page-bg" style="--page-bg: url('/images/guides-bg.png')" aria-hidden="true"></div>
  <div class="page-bg-overlay" aria-hidden="true"></div>

  <div class="guides-wrap">
    <header class="guides-hero">
      <h1 class="guides-title">Info &amp; Guides</h1>
      <p class="guides-sub">
        Reference tools and quick, clear explanations for mechanics. No fluff, just answers.
      </p>
    </header>

    <main class="guides-stack" aria-label="Info and guides modules">

      <!-- 1) POWER List -->
      <section class="guide-box" aria-label="Power list">
        <div class="box-row">
          <div class="box-main">
            <div class="box-title">Nightshift Tower Defense POWER List By Clancy</div>
            <div class="box-desc">
              A living reference list that ranks POWER!! Power is DPS × RANGE / 100 × PLACEMENTS.
            </div>
            <div class="box-actions">
              <a
                class="box-btn"
                href="https://docs.google.com/spreadsheets/d/19_xB9LuzibW8vKG2joLE2vmsCweJ0jj4QH5jqiz6pQg/edit?gid=0#gid=0"
                target="_blank"
                rel="noopener noreferrer"
              >
                Open Sheet ↗
              </a>
            </div>
          </div>

          <div class="box-media">
            <div class="media-label">Image slot</div>
            <div class="media-sub">Drop a preview here later</div>
          </div>
        </div>
      </section>

      <!-- 2) Enchant List -->
      <section class="guide-box" aria-label="Enchant list">
        <div class="box-row">
          <div class="box-main">
            <div class="box-title">Nightshift Tower Defense Enchant List By Clancy</div>
            <div class="box-desc">
              A complete list of enchants and what they do for each unit in the game.
            </div>
            <div class="box-actions">
              <a
                class="box-btn"
                href="https://docs.google.com/spreadsheets/d/1T9-y930-4v2L8QQ0Kgor9H-eWfngOdAtx7BNTniZKrs/edit?gid=0#gid=0"
                target="_blank"
                rel="noopener noreferrer"
              >
                Open Sheet ↗
              </a>
            </div>
          </div>

          <div class="box-media">
            <div class="media-label">Image slot</div>
            <div class="media-sub">Drop a preview here later</div>
          </div>
        </div>
      </section>

      <!-- 3) Chip List -->
      <section class="guide-box" aria-label="Chip list coming soon">
        <div class="box-row">
          <div class="box-main">
            <div class="box-title">Nightshift Tower Defense Chip List By Clancy</div>
            <div class="box-desc">
              This will be the full chip reference sheet. It’s not live yet, but it’s planned for this hub.
            </div>
            <div class="box-actions">
              <span class="box-btn disabled">Coming soon</span>
            </div>
          </div>

          <div class="box-media" data-soon="true">
            <div class="media-label">Coming soon</div>
            <div class="media-sub">Chip previews later</div>
          </div>
        </div>
      </section>

      <!-- 4) Status Effects -->
      <section class="guide-box" aria-label="Status effects">
        <div class="box-row">
          <div class="box-main">
            <div class="box-title">Status Effects</div>
            <div class="box-desc">
              Pick an effect and get a straight explanation of what it does, what scales, and what does not.
            </div>

            <div class="picker-row">
              <label class="picker-label" for="statusSelect">Status Effect</label>
              <select id="statusSelect" class="picker-select">
                <option value="poison">Poison</option>
                <option value="bleed">Bleed</option>
                <option value="burn">Burn</option>
                <option value="slow">Slow</option>
                <option value="stun">Stun</option>
              </select>
            </div>

            <div class="info-panel">
              <div class="panel-title" id="statusTitle">Poison</div>
              <div class="panel-text" id="statusText">
                Poison stays on an enemy until it dies. Its damage is flat and does not scale with the unit’s damage unless an enchant explicitly says it increases poison.
              </div>
              <div class="panel-note" id="statusNote">
                If something says “+% Poison,” that changes poison. A normal “+% Damage” does not.
              </div>
            </div>
          </div>

          <div class="box-media">
            <div class="media-label">Image slot</div>
            <div class="media-sub">Status icon or chart</div>
          </div>
        </div>
      </section>

      <!-- 5) Enchants -->
      <section class="guide-box" aria-label="Enchants">
        <div class="box-row">
          <div class="box-main">
            <div class="box-title">Enchants</div>
            <div class="box-desc">
              Pick an enchant to see what it changes in plain English.
            </div>

            <div class="picker-row">
              <label class="picker-label" for="enchantSelect">Enchant</label>
              <select id="enchantSelect" class="picker-select">
                <option value="damagePct">+% Damage</option>
                <option value="poisonPct">+% Poison</option>
                <option value="bleedPct">+% Bleed</option>
                <option value="cooldownPct">-% Cooldown</option>
                <option value="rangeFlat">+ Range</option>
              </select>
            </div>

            <div class="info-panel">
              <div class="panel-title" id="enchantTitle">+% Damage</div>
              <div class="panel-text" id="enchantText">
                Increases the unit’s damage. This will also increase any effects that scale from damage, like bleed.
              </div>
              <div class="panel-note" id="enchantNote">
                It does not increase poison damage unless something explicitly says it affects poison.
              </div>
            </div>
          </div>

          <div class="box-media">
            <div class="media-label">Image slot</div>
            <div class="media-sub">Enchant icon or chart</div>
          </div>
        </div>
      </section>

    </main>
  </div>

  <script is:inline>
    const statusData = {
      poison: {
        title: "Poison",
        text: "Poison stays on an enemy until it dies. Its damage is flat and does not scale with unit damage unless stated.",
        note: "Only +% Poison affects poison."
      },
      bleed: {
        title: "Bleed",
        text: "Bleed scales with unit damage. Increasing damage increases bleed damage.",
        note: "+% Bleed increases the bleed percent itself."
      },
      burn: {
        title: "Burn",
        text: "Burn deals a percentage of enemy health. Higher health enemies take more damage.",
        note: "Increasing burn % increases total output."
      },
      slow: {
        title: "Slow",
        text: "Slow reduces enemy movement speed permanently after being hit.",
        note: "Some enemies resist slow."
      },
      stun: {
        title: "Stun",
        text: "Stun completely stops enemies in place.",
        note: "Elites and bosses have stun resistance."
      }
    };

    const enchantData = {
      damagePct: {
        title: "+% Damage",
        text: "Increases unit damage and all effects that scale from damage.",
        note: "Does not affect poison."
      },
      poisonPct: {
        title: "+% Poison",
        text: "Directly increases poison damage.",
        note: "Separate from damage scaling."
      },
      bleedPct: {
        title: "+% Bleed",
        text: "Increases bleed percentage.",
        note: "Stacks with damage increases."
      },
      cooldownPct: {
        title: "-% Cooldown",
        text: "Reduces attack cooldown.",
        note: "Cooldown floors at 0.01."
      },
      rangeFlat: {
        title: "+ Range",
        text: "Increases attack range.",
        note: "Range is independent of attack type."
      }
    };

    function updatePanel(prefix, data) {
      const select = document.getElementById(prefix + "Select");
      document.getElementById(prefix + "Title").textContent = data[select.value].title;
      document.getElementById(prefix + "Text").textContent = data[select.value].text;
      document.getElementById(prefix + "Note").textContent = data[select.value].note;
    }

    statusSelect.addEventListener("change", () => updatePanel("status", statusData));
    enchantSelect.addEventListener("change", () => updatePanel("enchant", enchantData));
  </script>

  <style>
    /* Background */
    .page-bg{
      position: fixed;
      inset: 0;
      z-index: -2;
      background-image: var(--page-bg);
      background-size: cover;
      filter: blur(4px) brightness(.52);
      transform: scale(1.08);
    }

    .page-bg-overlay{
      position: fixed;
      inset: 0;
      z-index: -1;
      background: linear-gradient(180deg, rgba(10,12,18,.55), rgba(10,12,18,.85));
    }

    /* Layout */
    .guides-wrap{ max-width:1040px; margin:auto; padding:26px 18px 90px; }
    .guides-title{ font-size:clamp(42px,5vw,66px); }
    .guides-stack{ display:grid; gap:18px; }

    .guide-box{
      border-radius:22px;
      padding:18px;
      background:rgba(0,0,0,.26);
      border:1px solid rgba(255,255,255,.2);
    }

    .box-row{ display:grid; grid-template-columns:1fr 240px; gap:16px; }
    .box-media{ border-radius:18px; background:rgba(0,0,0,.18); padding:12px; text-align:center; }

    /* Select styling */
    .picker-select{
      background:#0b0f18;
      color:#fff;
      border-radius:14px;
      padding:12px;
      border:1px solid rgba(255,255,255,.2);
    }

    .picker-select option{
      background:#0b0f18;
      color:#fff;
    }

    .picker-select option:checked{
      background:#1e2a44;
    }
  </style>
</BaseLayout>
