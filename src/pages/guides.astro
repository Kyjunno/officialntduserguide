---
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout title="Info &amp; Guides | Official NTD User Guide">
  <div class="page-bg" style="--page-bg: url('/images/guides-bg.png')" aria-hidden="true"></div>
  <div class="page-bg-overlay" aria-hidden="true"></div>

  <div class="guides-wrap">
    <header class="guides-hero">
      <h1 class="guides-title">Info &amp; Guides</h1>
      <p class="guides-sub">
        Reference tools and quick, clear explanations for mechanics. No fluff, just answers.
      </p>
    </header>

    <main class="guides-stack" aria-label="Info and guides modules">
      <!-- 1) POWER List -->
      <section class="guide-box" aria-label="Power list">
        <div class="box-row">
          <div class="box-main">
            <div class="box-title">Nightshift Tower Defense POWER List By Clancy</div>
            <div class="box-desc">
              A living reference list that ranks POWER!! Power is DPS × RANGE / 100 × PLACEMENTS.
            </div>
            <div class="box-actions">
              <a
                class="box-btn"
                href="https://docs.google.com/spreadsheets/d/19_xB9LuzibW8vKG2joLE2vmsCweJ0jj4QH5jqiz6pQg/edit?gid=0#gid=0"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Open Nightshift Tower Defense POWER List By Clancy in a new tab"
              >
                Open Sheet <span aria-hidden="true">↗</span>
              </a>
            </div>
          </div>

          <div class="box-media" aria-label="Power list preview image">
            <img
              class="box-img"
              src="/images/guides/power.png"
              alt="Power list preview"
              loading="lazy"
              decoding="async"
            />
          </div>
        </div>
      </section>

      <!-- 2) Enchant List -->
      <section class="guide-box" aria-label="Enchant list">
        <div class="box-row">
          <div class="box-main">
            <div class="box-title">Nightshift Tower Defense Enchant List By Clancy</div>
            <div class="box-desc">
              A complete list of enchants and what they do for each unit in the game!!
            </div>
            <div class="box-actions">
              <a
                class="box-btn"
                href="https://docs.google.com/spreadsheets/d/1T9-y930-4v2L8QQ0Kgor9H-eWfngOdAtx7BNTniZKrs/edit?gid=0#gid=0"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Open Nightshift Tower Defense Enchant List By Clancy in a new tab"
              >
                Open Sheet <span aria-hidden="true">↗</span>
              </a>
            </div>
          </div>

          <div class="box-media" aria-label="Enchant list preview image">
            <img
              class="box-img"
              src="/images/guides/enchant-list.png"
              alt="Enchant list preview"
              loading="lazy"
              decoding="async"
            />
          </div>
        </div>
      </section>

      <!-- 3) Chip List (Coming Soon) -->
      <section class="guide-box" aria-label="Chip list coming soon">
        <div class="box-row">
          <div class="box-main">
            <div class="box-title">Nightshift Tower Defense Chip List By Clancy</div>
            <div class="box-desc">
              This will be the full chip reference sheet. It’s not live yet, but it’s planned for this hub.
            </div>
            <div class="box-actions">
              <span class="box-btn disabled" aria-disabled="true">Coming soon</span>
            </div>
          </div>

          <div class="box-media" aria-label="Chip list preview image">
            <img
              class="box-img"
              src="/images/guides/chips.png"
              alt="Chip list preview"
              loading="lazy"
              decoding="async"
            />
            <div class="media-soon-tag" aria-hidden="true">Coming soon</div>
          </div>
        </div>
      </section>

      <!-- 4) Status Effects -->
      <section class="guide-box" aria-label="Status effects">
        <div class="box-row">
          <div class="box-main">
            <div class="box-title">Status Effects</div>
            <div class="box-desc">
              Pick an effect and get a straight explanation of what it does, what scales, and what does not.
            </div>

            <div class="picker-row">
              <label class="picker-label" for="statusSelect">Status Effect</label>
              <select id="statusSelect" class="picker-select" aria-label="Select a status effect">
                <option value="poison">Poison</option>
                <option value="bleed">Bleed</option>
                <option value="burn">Burn</option>
                <option value="slow">Slow</option>
                <option value="stun">Stun</option>
              </select>
            </div>

            <div id="statusPanel" class="info-panel" role="region" aria-label="Status effect details">
              <div class="panel-title" id="statusTitle">Poison</div>
              <div class="panel-text" id="statusText">
                Poison stays on an enemy until it dies. Its damage is flat and does not scale with the unit’s damage unless an enchant
                or effect explicitly says it increases poison.
              </div>
              <div class="panel-note" id="statusNote">
                If something says “+% Poison,” that changes poison. A normal “+% Damage” does not.
              </div>
            </div>
          </div>

          <div class="box-media" aria-label="Status effect image">
            <img
              id="statusImg"
              class="box-img"
              src="/images/guides/status/poison.png"
              alt="Status effect icon"
              loading="lazy"
              decoding="async"
            />
          </div>
        </div>
      </section>

      <!-- 5) Enchants -->
      <section class="guide-box" aria-label="Enchants">
        <div class="box-row">
          <div class="box-main">
            <div class="box-title">Enchants</div>
            <div class="box-desc">
              Pick an enchant to see the exact bonuses. All values shown assume max enchant level.
            </div>

            <div class="picker-row">
              <label class="picker-label" for="enchantSelect">Enchant</label>
              <select id="enchantSelect" class="picker-select" aria-label="Select an enchant">
                <option value="damage3">Damage 3</option>
                <option value="range3">Range 3</option>
                <option value="cooldown3">Cooldown 3</option>
                <option value="pizzaParty">Pizza Party</option>
                <option value="withered">Withered</option>
                <option value="bleedEncased">Bleed Encased</option>
                <option value="fractured">Fractured</option>
                <option value="clockworks">Clockworks</option>
                <option value="diminished">Diminished</option>
                <option value="charlottesOffering">Charlotte&apos;s Offering</option>
                <option value="helpWanted">Help Wanted</option>
                <option value="springlocked">Springlocked</option>
              </select>
            </div>

            <div id="enchantPanel" class="info-panel" role="region" aria-label="Enchant details">
              <div class="panel-title" id="enchantTitle">Damage 3</div>
              <div class="panel-text" id="enchantText">
                +25% DMG.
              </div>
              <div class="panel-note" id="enchantNote">
                Max enchant level assumed.
              </div>
            </div>
          </div>

          <div class="box-media" aria-label="Enchant image">
            <img
              id="enchantImg"
              class="box-img"
              src="/images/guides/enchants/damage3.png"
              alt="Enchant icon"
              loading="lazy"
              decoding="async"
            />
          </div>
        </div>
      </section>
    </main>
  </div>

  <script is:inline>
    const statusData = {
      poison: {
        title: "Poison",
        text:
          "Poison stays on an enemy until it dies. Its damage is flat and does not scale with the unit’s damage unless an enchant or effect explicitly says it increases poison.",
        note:
          "If something says “+% Poison,” that changes poison. A normal “+% Damage” does not.",
        img: "/images/guides/status/poison.png",
      },
      bleed: {
        title: "Bleed",
        text:
          "Bleed damage scales with the unit’s damage. Increasing unit damage increases bleed damage, but does not automatically increase the bleed amount unless something says it changes the bleed %.",
        note:
          "A “+% Bleed” increases the bleed % itself. A “+% Damage” increases the damage bleed is based on.",
        img: "/images/guides/status/bleed.png",
      },
      burn: {
        title: "Burn",
        text:
          "Burn deals % of the health of the enemy. The higher the health, the more it does",
        note:
          "increasing the % of the burn increases the total output.",
        img: "/images/guides/status/burn.png",
      },
      slow: {
        title: "Slow",
        text:
          "Slow reduces enemy movement speed for the entire time the enemy is alive after being hit.",
        note:
          "Some enemies are resistent to slowing.",
        img: "/images/guides/status/slow.png",
      },
      stun: {
        title: "Stun",
        text:
          "Stun stops the enemies in their place. The longer the stun, the longer the enemies is stopped",
        note:
          "Elites and Bosses have resistances to stun.",
        img: "/images/guides/status/stun.png",
      },
    };

    const enchantData = {
      damage3: {
        title: "Damage 3",
        text: "+25% DMG.",
        note: "Max enchant level assumed.",
        img: "/images/guides/enchants/damage3.png",
      },
      range3: {
        title: "Range 3",
        text: "+30% RNG.",
        note: "Max enchant level assumed.",
        img: "/images/guides/enchants/range3.png",
      },
      cooldown3: {
        title: "Cooldown 3",
        text: "-15% CD (attacks faster).",
        note: "Max enchant level assumed.",
        img: "/images/guides/enchants/cooldown3.png",
      },
      pizzaParty: {
        title: "Pizza Party",
        text: "+30% DMG, +20% RNG, -10% CD.",
        note: "Max enchant level assumed.",
        img: "/images/guides/enchants/pizza-party.png",
      },
      withered: {
        title: "Withered",
        text: "+35% DMG, +35% RNG, +5% CD (attacks slower), +5% Bleed.",
        note: "Max enchant level assumed.",
        img: "/images/guides/enchants/withered.png",
      },
      bleedEncased: {
        title: "Bleed Encased",
        text: "+30% DMG, +20% RNG, +10% Slow, -10% CD.",
        note: "Max enchant level assumed.",
        img: "/images/guides/enchants/bleed-encased.png",
      },
      fractured: {
        title: "Fractured",
        text: "+65% DMG, +25% RNG, +20% Poison, +5% CD, +5% Slow.",
        note: "Max enchant level assumed.",
        img: "/images/guides/enchants/fractured.png",
      },
      clockworks: {
        title: "Clockworks",
        text: "+35% DMG, +20% RNG, +20% Stun, +5% Burn, -25% CD.",
        note: "Max enchant level assumed.",
        img: "/images/guides/enchants/clockworks.png",
      },
      diminished: {
        title: "Diminished",
        text: "+135% DMG, +50% RNG, +35% CD, +15% Slow, +15% Bleed.",
        note: "Max enchant level assumed.",
        img: "/images/guides/enchants/diminished.png",
      },
      charlottesOffering: {
        title: "Charlotte's Offering",
        text: "+65% DMG, +75% RNG, +20% Burn, +5% Slow, -10% CD.",
        note: "Max enchant level assumed.",
        img: "/images/guides/enchants/charlottes-offering.png",
      },
      helpWanted: {
        title: "Help Wanted",
        text: "+75% DMG, +35% RNG, +15% Poison, +10% Stun, +5% Burn, -5% CD.",
        note: "Max enchant level assumed.",
        img: "/images/guides/enchants/help-wanted.png",
      },
      springlocked: {
        title: "Springlocked",
        text: "+100% DMG, +35% RNG, +25% Stun, +15% Bleed, -10% CD.",
        note: "Max enchant level assumed.",
        img: "/images/guides/enchants/springlocked.png",
      },
    };

    function setPanel(prefix, data) {
      const select = document.getElementById(prefix + "Select");
      const titleEl = document.getElementById(prefix + "Title");
      const textEl = document.getElementById(prefix + "Text");
      const noteEl = document.getElementById(prefix + "Note");
      const imgEl = document.getElementById(prefix + "Img");
      if (!select || !titleEl || !textEl || !noteEl) return;

      const item = data[select.value];
      if (!item) return;

      titleEl.textContent = item.title;
      textEl.textContent = item.text;
      noteEl.textContent = item.note;

      if (imgEl && item.img) {
        imgEl.src = item.img;
        imgEl.alt = prefix === "status" ? `${item.title} status icon` : `${item.title} enchant icon`;
      }
    }

    const statusSelect = document.getElementById("statusSelect");
    const enchantSelect = document.getElementById("enchantSelect");

    if (statusSelect) {
      statusSelect.addEventListener("change", () => setPanel("status", statusData));
      setPanel("status", statusData);
    }

    if (enchantSelect) {
      enchantSelect.addEventListener("change", () => setPanel("enchant", enchantData));
      setPanel("enchant", enchantData);
    }
  </script>

  <style>
    .page-bg{
      position: fixed;
      inset: 0;
      z-index: -2;
      background-image: var(--page-bg);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      filter: blur(4px) brightness(0.52) contrast(1.05) saturate(1.05);
      transform: scale(1.08);
    }

    .page-bg-overlay{
      position: fixed;
      inset: 0;
      z-index: -1;
      background:
        radial-gradient(900px 650px at 20% 10%, rgba(106,168,255,.12), transparent 60%),
        radial-gradient(900px 650px at 80% 20%, rgba(159,91,255,.11), transparent 55%),
        linear-gradient(180deg, rgba(10,12,18,.55), rgba(10,12,18,.82));
    }

    .guides-wrap{
      max-width: 1040px;
      margin: 0 auto;
      padding: 26px 18px 90px;
      text-align: center;
    }

    .guides-hero{
      margin-bottom: 18px;
    }

    .guides-title{
      margin: 0;
      font-size: clamp(42px, 5vw, 66px);
      line-height: 1.02;
      letter-spacing: -0.02em;
    }

    .guides-sub{
      margin: 14px auto 0;
      max-width: 80ch;
      color: var(--muted);
      line-height: 1.7;
      font-size: 16px;
    }

    .guides-stack{
      margin-top: 22px;
      display: grid;
      gap: 18px;
      justify-items: center;
    }

    .guide-box{
      width: 100%;
      border-radius: 22px;
      padding: 18px;
      border: 1px solid rgba(255,255,255,.20);
      background: rgba(0,0,0,.26);
      box-shadow: var(--shadow);
      text-align: left;
    }

    .box-row{
      display: grid;
      grid-template-columns: 1fr 240px;
      gap: 16px;
      align-items: start;
    }

    .box-title{
      font-weight: 1000;
      letter-spacing: -0.01em;
      font-size: 18px;
      line-height: 1.25;
      margin-bottom: 8px;
    }

    .box-desc{
      color: var(--muted);
      line-height: 1.7;
      font-size: 14px;
      margin-bottom: 12px;
      max-width: 75ch;
    }

    .box-actions{
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .box-btn{
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      text-decoration: none;
      color: inherit;
      font-weight: 900;
      letter-spacing: 0.04em;
      font-size: 12px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(232,238,252,.35);
      background: rgba(0,0,0,.18);
      transition: transform .14s ease, border-color .14s ease, background .14s ease;
      width: fit-content;
    }

    .box-btn:hover{
      transform: translateY(-1px);
      border-color: rgba(232,238,252,.6);
      background: rgba(0,0,0,.22);
    }

    .box-btn.disabled{
      opacity: 0.65;
      cursor: not-allowed;
      pointer-events: none;
    }

    /* FLUSH IMAGE FRAME */
    .box-media{
      position: relative;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.18);
      min-height: 140px;
      overflow: hidden;
      padding: 0;
      display: flex;
      align-items: stretch;
      justify-content: stretch;
    }

    .box-img{
      width: 100%;
      height: 100%;
      display: block;
      border-radius: 0;
      filter: none;
      object-fit: cover;
      object-position: center;
    }

    .media-soon-tag{
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 11px;
      font-weight: 900;
      letter-spacing: 0.08em;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.30);
      color: rgba(232,238,252,.86);
      pointer-events: none;
      z-index: 1;
    }

    .picker-row{
      display: grid;
      grid-template-columns: 140px 1fr;
      gap: 12px;
      align-items: center;
      margin-top: 8px;
      margin-bottom: 12px;
    }

    .picker-label{
      font-weight: 900;
      letter-spacing: 0.02em;
      font-size: 13px;
      color: rgba(232,238,252,.90);
    }

    .picker-select{
      width: 100%;
      border-radius: 14px;
      padding: 12px 12px;
      border: 1px solid rgba(255,255,255,.20);
      background: rgba(0,0,0,.20);
      color: rgba(232,238,252,.95);
      outline: none;
    }

    .picker-select:focus{
      border-color: rgba(232,238,252,.55);
    }

    .picker-select option{
      background-color: #0b0f18;
      color: rgba(232,238,252,.95);
    }

    .picker-select option:checked{
      background-color: #1e2a44;
      color: #ffffff;
    }

    .picker-select option:hover{
      background-color: #161c2e;
      color: #ffffff;
    }

    .info-panel{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.16);
      padding: 14px 14px 12px;
    }

    .panel-title{
      font-weight: 1000;
      font-size: 16px;
      margin-bottom: 8px;
      letter-spacing: -0.01em;
    }

    .panel-text{
      color: rgba(232,238,252,.88);
      line-height: 1.7;
      font-size: 14px;
      margin-bottom: 10px;
    }

    .panel-note{
      color: var(--muted);
      line-height: 1.7;
      font-size: 13px;
      border-top: 1px solid rgba(255,255,255,.10);
      padding-top: 10px;
    }

    @media (max-width: 820px){
      .box-row{
        grid-template-columns: 1fr;
      }
      .box-media{
        min-height: 140px;
      }
    }

    @media (max-width: 640px){
      .picker-row{
        grid-template-columns: 1fr;
      }
    }
  </style>
</BaseLayout>
