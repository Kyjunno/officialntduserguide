---
import BaseLayout from "../layouts/BaseLayout.astro";
const pageTitle = "Unit Arcade";
---

<BaseLayout title={pageTitle}>
  <main class="ua-root" id="uaRoot">
    <!-- SEARCH-ONLY VIEW -->
    <section id="searchView" class="ua-center" aria-label="Unit Arcade Search View">
      <div class="ua-card">
        <h1 class="ua-title">Unit Arcade</h1>
        <p class="ua-sub">Type a unit name and pick from the dropdown.</p>

        <div class="ua-row">
          <div class="ua-field" id="centerField">
            <input
              id="unitSearch"
              class="ua-input"
              type="text"
              placeholder="Search units..."
              autocomplete="off"
              spellcheck="false"
            />
            <div id="unitDropdown" class="ua-dropdown" role="listbox" aria-label="Unit list"></div>
          </div>

          <button id="openBtn" class="ua-btn" type="button">Open</button>
        </div>

        <p class="ua-footnote">Click the search bar to browse units, or type to filter.</p>
      </div>
    </section>

    <!-- INFO VIEW -->
    <section id="infoView" class="ua-info" aria-label="Unit Arcade Info View">
      <div class="ua-infoWrap">
        <h1 id="unitTitle" class="ua-infoTitle">Unit Arcade</h1>
        <p id="unitSubtitle" class="ua-infoSub">Pick a unit to see details.</p>

        <div class="ua-panel">
          <div class="ua-panelRow">
            <div class="ua-panelLeft">
              <div class="ua-label">Unit search</div>

              <div class="ua-field" id="topField">
                <input
                  id="unitSearchTop"
                  class="ua-input"
                  type="text"
                  placeholder="Search units..."
                  autocomplete="off"
                  spellcheck="false"
                />
                <div id="unitDropdownTop" class="ua-dropdown" role="listbox" aria-label="Unit list"></div>
              </div>

              <div class="ua-help">Click the search bar to browse, or type to filter.</div>
            </div>

            <!-- Bigger image box -->
            <div class="ua-imageBox">
              <img id="unitImg" class="ua-image" alt="" />
              <div id="unitImgLabel" class="ua-imageText">No image</div>
            </div>
          </div>

          <div class="ua-divider"></div>

          <div class="ua-stats4">
            <div class="ua-stat">
              <div class="ua-statK">RARITY</div>
              <div id="rarityVal" class="ua-statV">Not set</div>
            </div>
            <div class="ua-stat">
              <div class="ua-statK">ATTACK TYPE</div>
              <div id="attackVal" class="ua-statV">Not set</div>
            </div>
            <div class="ua-stat">
              <div class="ua-statK">PLACEMENT PRICE</div>
              <div id="priceVal" class="ua-statV">Not set</div>
            </div>
            <div class="ua-stat">
              <div class="ua-statK">PLACEMENTS</div>
              <div id="placementsVal" class="ua-statV">Not set</div>
            </div>
          </div>

          <div class="ua-divider"></div>

          <div class="ua-wide">
            <div class="ua-wideK">OBTAINABILITY</div>
            <div id="obtainVal" class="ua-wideV">Not set yet.</div>
          </div>

          <div class="ua-divider"></div>

          <div class="ua-wide">
            <div class="ua-wideK ua-wideK2">
              <span>ABILITY</span>
              <span class="ua-wideRight">DESCRIPTION</span>
            </div>
            <div id="abilityVal" class="ua-wideV">No abilities listed yet.</div>
          </div>
        </div>

        <!-- CALCULATOR -->
        <section class="ua-calc" aria-label="Unit Calculator">
          <h2 class="ua-calcTitle">Calculator</h2>
          <p class="ua-calcSub">Choose options and see computed stats. This is the foundation for a full “unit machine”.</p>

          <div class="ua-calcPanel">
            <div class="ua-calcControls">
              <label class="ua-control">
                <span class="ua-controlK">Level</span>
                <select id="levelSel" class="ua-select">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                </select>
              </label>

              <label class="ua-control">
                <span class="ua-controlK">Shiny</span>
                <select id="shinySel" class="ua-select">
                  <option value="0">Normal</option>
                  <option value="1">Shiny</option>
                </select>
              </label>

              <label class="ua-control">
                <span class="ua-controlK">Enchant</span>
                <select id="enchantSel" class="ua-select">
                  <option value="none">None</option>
                  <option value="dmg10">DMG +10%</option>
                  <option value="dmg20">DMG +20%</option>
                  <option value="cd10">CD -10%</option>
                  <option value="cd20">CD -20%</option>
                  <option value="rng10">RNG +10%</option>
                  <option value="rng20">RNG +20%</option>
                </select>
              </label>

              <label class="ua-control">
                <span class="ua-controlK">Chip</span>
                <select id="chipSel" class="ua-select">
                  <option value="none">None</option>
                  <option value="dmg15">DMG +15%</option>
                  <option value="dmg30">DMG +30%</option>
                  <option value="cd15">CD -15%</option>
                  <option value="rng15">RNG +15%</option>
                </select>
              </label>
            </div>

            <div class="ua-calcGrid">
              <div class="ua-calcStat">
                <div class="ua-calcK">Damage</div>
                <div id="calcDmg" class="ua-calcV">-</div>
              </div>
              <div class="ua-calcStat">
                <div class="ua-calcK">Cooldown</div>
                <div id="calcCd" class="ua-calcV">-</div>
              </div>
              <div class="ua-calcStat">
                <div class="ua-calcK">DPS</div>
                <div id="calcDps" class="ua-calcV">-</div>
              </div>
              <div class="ua-calcStat">
                <div class="ua-calcK">Range</div>
                <div id="calcRng" class="ua-calcV">-</div>
              </div>
            </div>

            <div class="ua-calcNote" id="calcNote">
              Select a unit to compute stats.
            </div>
          </div>
        </section>
      </div>
    </section>
  </main>

  <script is:inline>
    const UNIT_NAMES = [
      "Bear5",
      "Test Dummy Endo",
      "Nightguard",
      "Chicken7",
      "Fan",
      "Bonnie",
      "Carl The Cupcake",
      "Freddy",
      "Foxy",
      "Chica",
      "Big Band Bonnie",
      "Golden Bonnie",
      "Bunny6",
      "Sparky The Dog",
      "Endo 01",
      "Bort Bunny",
      "Stuffed Freddy",
      "Phone Guy",
      "Golden Freddy",
      "Fox4",
      "The Amalgamation",
      "Shadow Freddy",
      "Endo Plush",
      "Crying Soul",
      "Lamp"
    ];

    const UNIT_DATA = {
      "Bear5": {
        id: "bear5",
        rarity: "Uncommon",
        attackType: "Single",
        placementPrice: "Not set",
        placements: "Not set",
        obtainability: "Not set yet.",
        ability: "No abilities listed yet.",
        baseDamage: 35.35,
        baseCooldown: 2.5,
        baseRange: 20.0
      },
      "Golden Bonnie": {
        id: "golden-bonnie",
        rarity: "Mythic",
        attackType: "Pierce + Poison",
        placementPrice: "$4,500",
        placements: "2",
        obtainability: "Not set yet.",
        ability: "Not set yet.",
        baseDamage: 50.5,
        baseCooldown: 2.0,
        baseRange: 27.5
      }
    };

    const htmlEl = document.documentElement;
    const bodyEl = document.body;
    const rootEl = document.getElementById("uaRoot");

    const searchView = document.getElementById("searchView");
    const infoView = document.getElementById("infoView");

    const unitSearch = document.getElementById("unitSearch");
    const unitDropdown = document.getElementById("unitDropdown");
    const openBtn = document.getElementById("openBtn");
    const centerField = document.getElementById("centerField");

    const unitSearchTop = document.getElementById("unitSearchTop");
    const unitDropdownTop = document.getElementById("unitDropdownTop");
    const topField = document.getElementById("topField");

    const unitTitle = document.getElementById("unitTitle");
    const unitSubtitle = document.getElementById("unitSubtitle");
    const unitImg = document.getElementById("unitImg");
    const unitImgLabel = document.getElementById("unitImgLabel");

    const rarityVal = document.getElementById("rarityVal");
    const attackVal = document.getElementById("attackVal");
    const priceVal = document.getElementById("priceVal");
    const placementsVal = document.getElementById("placementsVal");
    const obtainVal = document.getElementById("obtainVal");
    const abilityVal = document.getElementById("abilityVal");

    const levelSel = document.getElementById("levelSel");
    const shinySel = document.getElementById("shinySel");
    const enchantSel = document.getElementById("enchantSel");
    const chipSel = document.getElementById("chipSel");

    const calcDmg = document.getElementById("calcDmg");
    const calcCd = document.getElementById("calcCd");
    const calcDps = document.getElementById("calcDps");
    const calcRng = document.getElementById("calcRng");
    const calcNote = document.getElementById("calcNote");

    let currentUnitName = "";
    let currentUnit = null;

    function lockScroll() {
      htmlEl.classList.add("ua-lock");
      bodyEl.classList.add("ua-lock");
      rootEl.classList.add("ua-lock");
    }
    function unlockScroll() {
      htmlEl.classList.remove("ua-lock");
      bodyEl.classList.remove("ua-lock");
      rootEl.classList.remove("ua-lock");
    }

    infoView.style.display = "none";
    searchView.style.display = "grid";
    lockScroll();

    function openMenu(menuEl) { menuEl.style.display = "flex"; }
    function closeMenu(menuEl) { menuEl.style.display = "none"; }
    function closeAllMenus() {
      closeMenu(unitDropdown);
      closeMenu(unitDropdownTop);
    }
    closeAllMenus();

    function filterUnits(query) {
      const q = (query || "").trim().toLowerCase();
      if (!q) return UNIT_NAMES.slice(0, 10);
      return UNIT_NAMES.filter(n => n.toLowerCase().includes(q)).slice(0, 10);
    }

    function renderMenu(menuEl, items, onPick) {
      menuEl.innerHTML = "";

      if (!items.length) {
        const empty = document.createElement("div");
        empty.className = "ua-ddEmpty";
        empty.textContent = "No matches";
        menuEl.appendChild(empty);
        return;
      }

      for (const name of items) {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "ua-ddItem";
        btn.textContent = name;
        btn.setAttribute("role", "option");
        btn.addEventListener("click", () => {
          onPick(name);
          closeAllMenus();
        });
        menuEl.appendChild(btn);
      }
    }

    function showDropdownFor(inputEl, menuEl, onPick) {
      const list = filterUnits(inputEl.value);
      renderMenu(menuEl, list, (name) => {
        inputEl.value = name;
        onPick(name);
      });
      openMenu(menuEl);
    }

    function attachDropdown(inputEl, menuEl, fieldEl, onPick) {
      inputEl.addEventListener("focus", () => {
        closeAllMenus();
        showDropdownFor(inputEl, menuEl, onPick);
      });

      inputEl.addEventListener("click", () => {
        closeAllMenus();
        showDropdownFor(inputEl, menuEl, onPick);
      });

      inputEl.addEventListener("input", () => {
        showDropdownFor(inputEl, menuEl, onPick);
      });

      inputEl.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          closeAllMenus();
          inputEl.blur();
        }
        if (e.key === "Enter") {
          const val = (inputEl.value || "").trim();
          if (UNIT_NAMES.includes(val)) {
            onPick(val);
            closeAllMenus();
          }
        }
      });

      menuEl.addEventListener("mousedown", (e) => e.preventDefault());

      document.addEventListener(
        "mousedown",
        (e) => {
          const t = e.target;
          const insideThis = fieldEl.contains(t);
          const insideOther = (fieldEl === centerField ? topField.contains(t) : centerField.contains(t));
          if (!insideThis && !insideOther) closeAllMenus();
        },
        true
      );
    }

    function trySetImage(unitId) {
      unitImgLabel.textContent = "No image";
      unitImg.style.display = "none";
      unitImg.removeAttribute("src");
      unitImg.alt = "";

      if (!unitId) return;

      const candidates = [
        `/units/${unitId}.png`,
        `/units/${unitId}.webp`,
        `/units/${unitId}.jpg`
      ];

      let idx = 0;
      unitImg.alt = currentUnitName ? `${currentUnitName} unit image` : "Unit image";
      unitImg.style.display = "block";
      unitImg.src = candidates[idx];

      unitImg.onerror = () => {
        idx += 1;
        if (idx < candidates.length) unitImg.src = candidates[idx];
        else {
          unitImg.onerror = null;
          unitImg.style.display = "none";
          unitImgLabel.textContent = "No image";
        }
      };

      unitImg.onload = () => {
        unitImgLabel.textContent = "";
      };
    }

    function fmt(n, digits = 2) {
      if (!Number.isFinite(n)) return "-";
      return n.toFixed(digits);
    }

    function computeAndRender() {
      if (!currentUnit || !Number.isFinite(currentUnit.baseDamage) || !Number.isFinite(currentUnit.baseCooldown)) {
        calcDmg.textContent = "-";
        calcCd.textContent = "-";
        calcDps.textContent = "-";
        calcRng.textContent = "-";
        calcNote.textContent = "This unit has no calculator stats set yet.";
        return;
      }

      const level = Number(levelSel.value || "1");
      const shiny = Number(shinySel.value || "0") === 1;

      let dmgMult = 1;
      let cdMult = 1;
      let rngMult = 1;

      dmgMult *= 1 + Math.max(0, level - 1) * 0.06;
      if (shiny) dmgMult *= 1.15;

      function applyModifier(key) {
        if (key === "dmg10") dmgMult *= 1.10;
        if (key === "dmg20") dmgMult *= 1.20;
        if (key === "cd10") cdMult *= 0.90;
        if (key === "cd20") cdMult *= 0.80;
        if (key === "rng10") rngMult *= 1.10;
        if (key === "rng20") rngMult *= 1.20;

        if (key === "dmg15") dmgMult *= 1.15;
        if (key === "dmg30") dmgMult *= 1.30;
        if (key === "cd15") cdMult *= 0.85;
        if (key === "rng15") rngMult *= 1.15;
      }

      applyModifier(enchantSel.value);
      applyModifier(chipSel.value);

      const damage = currentUnit.baseDamage * dmgMult;
      const cooldown = Math.max(0.05, currentUnit.baseCooldown * cdMult);
      const dps = damage / cooldown;
      const range = (Number.isFinite(currentUnit.baseRange) ? currentUnit.baseRange : 0) * rngMult;

      calcDmg.textContent = fmt(damage, 2);
      calcCd.textContent = fmt(cooldown, 3);
      calcDps.textContent = fmt(dps, 2);
      calcRng.textContent = Number.isFinite(range) ? fmt(range, 1) : "-";

      calcNote.textContent = "These formulas are placeholders. Once you paste your real unit-machine rules, we swap them in.";
    }

    function loadUnit(name) {
      const unitName = (name || "").trim();
      if (!UNIT_NAMES.includes(unitName)) return;

      currentUnitName = unitName;
      currentUnit = UNIT_DATA[unitName] || null;

      searchView.style.display = "none";
      infoView.style.display = "block";
      unlockScroll();

      unitTitle.textContent = unitName;
      unitSubtitle.textContent = "Unit details and calculator.";
      unitSearchTop.value = unitName;

      const data = UNIT_DATA[unitName] || {};
      rarityVal.textContent = data.rarity || "Not set";
      attackVal.textContent = data.attackType || "Not set";
      priceVal.textContent = data.placementPrice || "Not set";
      placementsVal.textContent = data.placements || "Not set";
      obtainVal.textContent = data.obtainability || "Not set yet.";
      abilityVal.textContent = data.ability || "No abilities listed yet.";

      trySetImage(data.id || "");

      closeAllMenus();
      computeAndRender();

      window.scrollTo({ top: 0, behavior: "instant" });
    }

    openBtn.addEventListener("click", () => loadUnit(unitSearch.value));

    attachDropdown(unitSearch, unitDropdown, centerField, loadUnit);
    attachDropdown(unitSearchTop, unitDropdownTop, topField, loadUnit);

    levelSel.addEventListener("change", computeAndRender);
    shinySel.addEventListener("change", computeAndRender);
    enchantSel.addEventListener("change", computeAndRender);
    chipSel.addEventListener("change", computeAndRender);
  </script>

  <style>
    /* Full-page background image (YOUR ACTUAL PATH: /public/images/unit-arcade-bg.png) */
    :global(body) { background: transparent !important; }
    :global(body::before) {
      content: "";
      position: fixed;
      inset: 0;
      z-index: -2;
      background-image: url("/images/unit-arcade-bg.png");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }
    :global(body::after) {
      content: "";
      position: fixed;
      inset: 0;
      z-index: -1;
      background: rgba(5, 10, 20, 0.28);
      pointer-events: none;
    }

    /* No scroll until a unit is selected */
    :global(html.ua-lock),
    :global(body.ua-lock) {
      height: 100% !important;
      overflow: hidden !important;
    }
    .ua-lock {
      height: 100% !important;
      overflow: hidden !important;
    }

    .ua-root {
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px;
    }

    .ua-center {
      min-height: calc(100vh - 140px);
      display: grid;
      place-items: center;
    }

    .ua-card {
      width: min(760px, 100%);
      border-radius: 18px;
      border: 1px solid rgba(180, 210, 255, 0.18);
      background: rgba(10, 15, 25, 0.55);
      backdrop-filter: blur(10px);
      padding: 22px;
      text-align: center;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.35);
      overflow: visible;
    }

    .ua-title { margin: 0 0 6px; font-size: 2.2rem; font-weight: 900; }
    .ua-sub { margin: 0 0 14px; opacity: 0.85; }

    .ua-row {
      display: grid;
      grid-template-columns: 1fr 110px;
      gap: 10px;
      align-items: start;
    }

    .ua-field { position: relative; width: 100%; overflow: visible; }

    .ua-input {
      width: 100%;
      border-radius: 14px;
      border: 1px solid rgba(180, 210, 255, 0.18);
      background: rgba(5, 8, 15, 0.55);
      padding: 14px 14px;
      outline: none;
      color: inherit;
    }

    .ua-btn {
      border-radius: 14px;
      border: 1px solid rgba(180, 210, 255, 0.20);
      background: rgba(25, 40, 70, 0.35);
      padding: 14px;
      cursor: pointer;
      font-weight: 900;
      height: 52px;
    }

    .ua-footnote {
      margin: 12px 0 0;
      font-size: 0.85rem;
      opacity: 0.7;
    }

    .ua-dropdown {
      display: none;
      position: absolute;
      top: calc(100% + 8px);
      left: 0;
      width: 100%;
      z-index: 9999;

      border-radius: 14px;
      border: 1px solid rgba(180, 210, 255, 0.18);
      background: rgba(5, 8, 15, 0.94);
      backdrop-filter: blur(10px);

      max-height: 420px;
      overflow-y: auto;
      overflow-x: hidden;

      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.45);

      padding: 10px;

      flex-direction: column;
      gap: 8px;
    }

    .ua-ddItem {
      display: block !important;
      width: 100% !important;

      border-radius: 12px;
      border: 1px solid rgba(180, 210, 255, 0.10);
      background: rgba(255, 255, 255, 0.04);
      color: inherit;

      cursor: pointer;

      font-weight: 900;
      font-size: 1.08rem;

      text-align: center;
      padding: 12px 12px;
      margin: 0 !important;
    }

    .ua-ddItem:hover {
      background: rgba(180, 210, 255, 0.10);
      border-color: rgba(180, 210, 255, 0.22);
    }

    .ua-ddEmpty {
      padding: 12px;
      text-align: center;
      opacity: 0.65;
      font-weight: 800;
    }

    .ua-infoWrap { padding-bottom: 72px; }
    .ua-infoTitle { margin: 0 0 6px; font-size: 2.2rem; font-weight: 900; }
    .ua-infoSub { margin: 0 0 18px; opacity: 0.85; }

    .ua-panel {
      border-radius: 18px;
      border: 1px solid rgba(180, 210, 255, 0.18);
      background: rgba(10, 15, 25, 0.55);
      backdrop-filter: blur(10px);
      padding: 20px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.35);
      overflow: visible;
    }

    .ua-panelRow {
      display: grid;
      grid-template-columns: 1fr 260px;
      gap: 16px;
      align-items: stretch;
    }

    .ua-label {
      font-size: 0.85rem;
      font-weight: 800;
      letter-spacing: 0.04em;
      opacity: 0.9;
      margin-bottom: 10px;
      text-align: left;
    }

    .ua-help {
      margin-top: 10px;
      font-size: 0.8rem;
      opacity: 0.65;
      text-align: left;
    }

    .ua-imageBox {
      border-radius: 16px;
      border: 1px solid rgba(180, 210, 255, 0.18);
      background: rgba(5, 8, 15, 0.35);
      display: grid;
      place-items: center;
      overflow: hidden;
      position: relative;
      min-height: 220px;
    }

    .ua-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: none;
    }

    .ua-imageText {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      opacity: 0.7;
      font-weight: 800;
      pointer-events: none;
    }

    .ua-divider {
      height: 1px;
      background: rgba(180, 210, 255, 0.14);
      margin: 18px 0;
    }

    .ua-stats4 {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
    }

    .ua-stat {
      border-radius: 14px;
      border: 1px solid rgba(180, 210, 255, 0.14);
      background: rgba(5, 8, 15, 0.35);
      padding: 12px;
    }

    .ua-statK {
      font-size: 0.72rem;
      font-weight: 900;
      letter-spacing: 0.06em;
      opacity: 0.75;
    }

    .ua-statV { margin-top: 8px; font-weight: 800; }

    .ua-wide {
      border-radius: 14px;
      border: 1px solid rgba(180, 210, 255, 0.14);
      background: rgba(5, 8, 15, 0.35);
      padding: 14px;
    }

    .ua-wideK {
      font-size: 0.72rem;
      font-weight: 900;
      letter-spacing: 0.06em;
      opacity: 0.75;
      margin-bottom: 10px;
    }

    .ua-wideK2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .ua-wideRight { text-align: center; }
    .ua-wideV { font-weight: 700; opacity: 0.9; }

    .ua-calc { margin-top: 20px; }
    .ua-calcTitle { margin: 18px 0 6px; font-size: 1.6rem; font-weight: 900; }
    .ua-calcSub { margin: 0 0 12px; opacity: 0.85; }

    .ua-calcPanel {
      border-radius: 18px;
      border: 1px solid rgba(180, 210, 255, 0.18);
      background: rgba(10, 15, 25, 0.55);
      backdrop-filter: blur(10px);
      padding: 18px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.35);
    }

    .ua-calcControls {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
    }

    .ua-control { display: grid; gap: 8px; }

    .ua-controlK {
      font-size: 0.72rem;
      font-weight: 900;
      letter-spacing: 0.06em;
      opacity: 0.8;
    }

    .ua-select {
      width: 100%;
      border-radius: 14px;
      border: 1px solid rgba(180, 210, 255, 0.18);
      background: rgba(5, 8, 15, 0.55);
      padding: 12px 12px;
      outline: none;
      color: inherit;
      font-weight: 800;
    }

    .ua-calcGrid {
      margin-top: 14px;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
    }

    .ua-calcStat {
      border-radius: 14px;
      border: 1px solid rgba(180, 210, 255, 0.14);
      background: rgba(5, 8, 15, 0.35);
      padding: 12px;
      text-align: center;
    }

    .ua-calcK {
      font-size: 0.72rem;
      font-weight: 900;
      letter-spacing: 0.06em;
      opacity: 0.75;
    }

    .ua-calcV { margin-top: 8px; font-weight: 900; font-size: 1.2rem; }

    .ua-calcNote {
      margin-top: 12px;
      opacity: 0.7;
      font-weight: 700;
      text-align: center;
    }

    @media (max-width: 900px) {
      .ua-row { grid-template-columns: 1fr; }
      .ua-panelRow { grid-template-columns: 1fr; }
      .ua-stats4 { grid-template-columns: repeat(2, 1fr); }
      .ua-calcControls { grid-template-columns: repeat(2, 1fr); }
      .ua-calcGrid { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</BaseLayout>
