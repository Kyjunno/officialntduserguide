---
import BaseLayout from "../../layouts/BaseLayout.astro";

type Unit = {
  rank: number;
  name: string;
  image: string;
  cost: string;
  rarity: string;
  maxDps: string;
  attackType: string;
  placements: string;
  dmg: string;
  rng: string;
  cd: string;
  reasoning: string;
};

const units: Unit[] = [
  {
    rank: 1,
    name: "The Amalgamation",
    image: "/images/tierlists/endgames/the-amalgamation.png",
    cost: "$15,000",
    rarity: "Vengeful",
    maxDps: "625",
    attackType: "Cone AOE (50%)",
    placements: "1",
    dmg: "1,250",
    rng: "30",
    cd: "2",
    reasoning:
      "While yes, he does much less DPS than Shadow Freddy, it’s his ability that made me love him. Every 60 seconds, he will boost all stats of all placed towers by 10% for 10 seconds. Include the fact that he has 30 range (highest in the game) and that is insane.",
  },
  {
    rank: 2,
    name: "Shadow Freddy",
    image: "/images/tierlists/endgames/shadow-freddy.png",
    cost: "$12,500",
    rarity: "Vengeful",
    maxDps: "1,000",
    attackType: "AOE + Slow",
    placements: "1",
    dmg: "100",
    rng: "20",
    cd: "0.1",
    reasoning:
      "Honestly, it’s tough to put him below The Amalgamation. His sheer DPS is some of the best in the game. I just believe that the boosts from The Amalgamation and the 30 range really puts him just a leg further.",
  },
];
---
<BaseLayout title="Endgame Tier List | Nightshift Tower Defense User Guide">
  <div class="tierpage-bg" aria-hidden="true"></div>
  <div class="tierpage-bg-overlay" aria-hidden="true"></div>

  <div class="page">
    <header class="hero">
      <h1 class="title">Endgame Tier List</h1>
      <div class="sub">$8,000 and up</div>
      <div class="note">Reminder that this is made with my opinion in mind.</div>
    </header>

    <div class="layout">
      <section class="leftPanel" aria-label="Top Endgame units">
        <div class="leftHeader">
          <div class="leftTitle">Top Endgame Units</div>
          <div class="leftSub">Rankings</div>
        </div>

        <div class="rows">
          {units.map((u) => (
            <article class="row" aria-label={`${u.name} rank ${u.rank}`}>
              <div class="imgWrap">
                <img
                  class="img"
                  src={u.image}
                  alt={u.name}
                  loading="lazy"
                  decoding="async"
                  onerror="this.style.display='none'; this.parentElement.querySelector('.imgFallback')?.classList.add('show')"
                />
                <div class="imgFallback">IMG</div>

                <div class="tag name">{u.name}</div>
                <div class="tag rank">#{u.rank}</div>
                <div class="tag cost">{u.cost}</div>
              </div>

              <div class="info">
                <div class="miniGrid topLine">
                  <div class="miniBox">
                    <div class="k">Max DPS</div>
                    <div class="v">{u.maxDps}</div>
                  </div>
                  <div class="miniBox">
                    <div class="k">Attack Type</div>
                    <div class="v">{u.attackType}</div>
                  </div>
                  <div class="miniBox">
                    <div class="k">Placements</div>
                    <div class="v">{u.placements}</div>
                  </div>
                </div>

                <div class="miniGrid statsLine">
                  <div class="miniBox">
                    <div class="k">DMG</div>
                    <div class="v">{u.dmg}</div>
                  </div>
                  <div class="miniBox">
                    <div class="k">CD</div>
                    <div class="v">{u.cd}</div>
                  </div>
                  <div class="miniBox">
                    <div class="k">RNG</div>
                    <div class="v">{u.rng}</div>
                  </div>
                  <div class="miniBox">
                    <div class="k">Rarity</div>
                    <div class="v">{u.rarity}</div>
                  </div>
                </div>
              </div>
            </article>
          ))}
        </div>
      </section>

      <aside class="rightPanel" aria-label="Notes and explanations">
        <div class="rightHeader">
          <div class="rightTitle">Why these rankings?</div>
          <div class="rightSub">Explanations</div>
        </div>

        <div class="rightBody">
          <div class="notesList">
            {units.map((u) => (
              <section class="noteCard" aria-label={`Reasoning for ${u.name}`}>
                <div class="noteHead">
                  <div class="noteName">{u.name}</div>
                  <div class="noteRank">#{u.rank}</div>
                </div>
                <div class="noteText">{u.reasoning}</div>
              </section>
            ))}
          </div>
        </div>
      </aside>
    </div>
  </div>

  <style>
    .tierpage-bg{
      position: fixed;
      inset: 0;
      z-index: -2;
      background-image: url("/images/tierlist-bg.png");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      filter: blur(1px) brightness(0.85) contrast(1.05) saturate(1.2);
      transform: scale(1.02);
    }

    .tierpage-bg-overlay{
      position: fixed;
      inset: 0;
      z-index: -1;
      background:
        radial-gradient(900px 650px at 20% 10%, rgba(106,168,255,.18), transparent 60%),
        radial-gradient(900px 650px at 80% 20%, rgba(159,91,255,.16), transparent 55%),
        linear-gradient(180deg, rgba(10,12,18,.22), rgba(10,12,18,.55));
    }

    .page{
      max-width: 1200px;
      margin: 0 auto;
      padding: 26px 18px 80px;
    }

    .hero{
      text-align: center;
      margin-bottom: 18px;
    }

    .title{
      margin: 0;
      font-size: clamp(42px, 5vw, 66px);
      line-height: 1.02;
      letter-spacing: -0.02em;
    }

    .sub{
      margin-top: 10px;
      font-weight: 900;
      color: rgba(232,238,252,.9);
      letter-spacing: 0.02em;
      font-size: 14px;
    }

    .note{
      margin-top: 8px;
      color: rgba(232,238,252,.65);
      font-size: 13px;
      line-height: 1.55;
    }

    .layout{
      display: grid;
      grid-template-columns: 1.05fr 0.95fr;
      gap: 18px;
      align-items: start;
    }

    .leftPanel{
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.20);
      background: rgba(0,0,0,.22);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .leftHeader{
      padding: 14px 14px 10px;
      border-bottom: 1px solid rgba(255,255,255,.10);
    }

    .leftTitle{
      font-weight: 1000;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-size: 13px;
      color: rgba(232,238,252,.95);
    }

    .leftSub{
      margin-top: 6px;
      font-size: 12px;
      color: rgba(232,238,252,.65);
    }

    .rows{
      padding: 12px;
      display: grid;
      gap: 10px;
    }

    .row{
      display: grid;
      grid-template-columns: 140px 1fr;
      gap: 10px;
      padding: 10px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.16);
    }

    .imgWrap{
      position: relative;
      border-radius: 16px;
      border: 2px solid rgba(232,238,252,.70);
      overflow: hidden;
      background: rgba(0,0,0,.22);
      aspect-ratio: 1 / 1;
    }

    .img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      display: block;
    }

    .imgFallback{
      position: absolute;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      font-weight: 1000;
      letter-spacing: 0.12em;
      color: rgba(232,238,252,.75);
      background: rgba(0,0,0,.20);
    }
    .imgFallback.show{ display: flex; }

    .tag{
      position: absolute;
      padding: 6px 8px;
      font-weight: 900;
      font-size: 11px;
      color: rgba(255,255,255,.92);
      background: rgba(0,0,0,.55);
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 12px;
      backdrop-filter: blur(6px);
      line-height: 1;
    }

    .tag.name{
      top: 8px;
      left: 8px;
      max-width: calc(100% - 58px);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .tag.rank{
      top: 8px;
      right: 8px;
    }

    .tag.cost{
      bottom: 8px;
      left: 8px;
    }

    .info{
      display: grid;
      gap: 8px;
      align-content: center;
    }

    .miniGrid{
      display: grid;
      gap: 8px;
    }

    .topLine{
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }

    .statsLine{
      grid-template-columns: repeat(4, minmax(0, 1fr));
    }

    .miniBox{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.14);
      padding: 8px 9px;
      min-height: 46px;
      display: grid;
      align-content: center;
      gap: 4px;
    }

    .k{
      font-size: 10px;
      font-weight: 900;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: rgba(232,238,252,.62);
    }

    .v{
      font-size: 12px;
      font-weight: 900;
      color: rgba(232,238,252,.92);
    }

    .rightPanel{
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.20);
      background: rgba(0,0,0,.18);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .rightHeader{
      padding: 14px 14px 10px;
      border-bottom: 1px solid rgba(255,255,255,.10);
    }

    .rightTitle{
      font-weight: 1000;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      font-size: 13px;
      color: rgba(232,238,252,.95);
    }

    .rightSub{
      margin-top: 6px;
      font-size: 12px;
      color: rgba(232,238,252,.65);
    }

    .rightBody{
      padding: 14px;
      color: rgba(232,238,252,.80);
      font-size: 13px;
      line-height: 1.7;
    }

    .notesList{
      display: grid;
      gap: 10px;
    }

    .noteCard{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.14);
      padding: 12px;
    }

    .noteHead{
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 8px;
    }

    .noteName{
      font-weight: 1000;
      color: rgba(232,238,252,.95);
      font-size: 13px;
      letter-spacing: 0.02em;
    }

    .noteRank{
      font-weight: 1000;
      color: rgba(232,238,252,.70);
      font-size: 12px;
    }

    .noteText{
      color: rgba(232,238,252,.78);
      font-size: 13px;
      line-height: 1.7;
    }

    @media (max-width: 1050px){
      .layout{ grid-template-columns: 1fr; }
    }

    @media (max-width: 520px){
      .row{ grid-template-columns: 1fr; }
      .topLine{ grid-template-columns: 1fr; }
      .statsLine{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }
  </style>
</BaseLayout>
